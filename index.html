<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Laborat√≥rio Virtual - Plano Inclinado</title>
  <style>
    body { background-color: #111; color: white; font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 20px; }
    h1 { color: #00ffcc; }
    canvas { border: 1px solid white; margin-top: 20px; }
    #controls { margin-top: 20px; }
    button { margin: 5px; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { opacity: 0.8; }
    .btn-primary { background: #00ccff; color: black; }
    .btn-secondary { background: #ffcc00; color: black; }
    label { margin-right: 15px; }
    #chartContainer { width: 95%; max-width: 800px; margin: 30px auto; background: #222; padding: 20px; border-radius: 10px; }
  </style>
</head>
<body>
  <h1>üåç Laborat√≥rio Virtual - Plano Inclinado</h1>
  <p>Experimente ajustar o <b>√¢ngulo</b> e o <b>coeficiente de atrito</b> para ver como o bloco se movimenta.</p>
  
  <canvas id="canvas" width="800" height="400"></canvas>
  <div id="info"></div>
  
  <div id="controls">
    <label>√Çngulo (¬∞): 
      <input type="number" id="theta" value="30" min="0" max="90">
    </label>
    <label>Coef. Atrito (Œº): 
      <input type="number" id="mu" value="0.0" min="0" max="1" step="0.1">
    </label>
    <button class="btn-primary" onclick="resetSimulation()">Resetar</button>
    <button class="btn-secondary" onclick="togglePause()">Pausar/Continuar</button>
  </div>

  <div id="chartContainer">
    <canvas id="chart"></canvas>
  </div>

  <button class="btn-primary" onclick="compartilhar()">üì± Compartilhar Experimento</button>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const infoDiv = document.getElementById('info');

    let g = 9.81;  
    let thetaDeg = 30;
    let thetaRad = thetaDeg * Math.PI / 180;
    let mu = 0.0;
    let a = g * Math.sin(thetaRad) - mu * g * Math.cos(thetaRad);

    const planeLength = 500;  
    const blockSize = 30;
    const dt = 0.02;  
    const scale = 20;  
    const forceScale = 5;

    const planeStartX = 50;
    const planeStartY = canvas.height - 50;

    let posX = planeStartX;
    let posY = planeStartY;
    let vel = 0;
    let paused = false;
    let time = 0;

    const chartCtx = document.getElementById('chart').getContext('2d');
    const chart = new Chart(chartCtx, {
      type: 'line',
      data: { labels: [], datasets: [
        { label: 'Velocidade (m/s)', borderColor: 'lime', backgroundColor: 'lime', data: [], fill: false },
        { label: 'Acelera√ß√£o (m/s¬≤)', borderColor: 'orange', backgroundColor: 'orange', data: [], fill: false }
      ]},
      options: { responsive: true, scales: {
        x: { title: { display: true, text: 'Tempo (s)', color: 'white' }, ticks: { color: 'white' } },
        y: { title: { display: true, text: 'Valores', color: 'white' }, ticks: { color: 'white' } }
      }, plugins: { legend: { labels: { color: 'white' } } } }
    });

    function resetSimulation() {
      thetaDeg = parseFloat(document.getElementById('theta').value);
      thetaRad = thetaDeg * Math.PI / 180;
      mu = parseFloat(document.getElementById('mu').value);
      a = g * Math.sin(thetaRad) - mu * g * Math.cos(thetaRad);
      posX = planeStartX; posY = planeStartY; vel = 0; time = 0;
      chart.data.labels = []; chart.data.datasets[0].data = []; chart.data.datasets[1].data = [];
      chart.update(); draw();
    }

    function togglePause() { paused = !paused; }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const endX = planeStartX + planeLength * Math.cos(thetaRad);
      const endY = planeStartY - planeLength * Math.sin(thetaRad);
      ctx.beginPath(); ctx.moveTo(planeStartX, planeStartY); ctx.lineTo(endX, endY);
      ctx.strokeStyle = 'white'; ctx.lineWidth = 5; ctx.stroke();
      ctx.fillStyle = 'red'; ctx.fillRect(posX - blockSize/2, posY - blockSize/2, blockSize, blockSize);
      infoDiv.innerHTML = `√Çngulo: ${thetaDeg}¬∞ | Acelera√ß√£o: ${a.toFixed(2)} m/s¬≤ | Velocidade: ${vel.toFixed(2)} m/s`;
    }

    function update() {
      if (!paused && posX < planeStartX + planeLength * Math.cos(thetaRad)) {
        vel += a * dt; const ds = vel * dt * scale;
        posX += ds * Math.cos(thetaRad); posY -= ds * Math.sin(thetaRad); time += dt;
        chart.data.labels.push(time.toFixed(1));
        chart.data.datasets[0].data.push(vel.toFixed(2));
        chart.data.datasets[1].data.push(a.toFixed(2)); chart.update();
      }
      draw();
    }

    function compartilhar() {
      const url = window.location.href;
      if (navigator.share) {
        navigator.share({ title: 'Experimento Plano Inclinado', text: 'Teste este simulador interativo de f√≠sica!', url });
      } else {
        alert("Copie e compartilhe este link: " + url);
      }
    }

    setInterval(update, 20);
  </script>
</body>
</html>